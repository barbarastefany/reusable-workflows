name: 3. Create PR to Main
on:
  workflow_call:

jobs:
  create-pr:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      pull-requests: write
    steps:
      - name: Checkout develop branch
        uses: actions/checkout@v4
        with:
          ref: develop
          fetch-depth: 0

      - name: Create PR from develop to main
        uses: peter-evans/create-pull-request@v5
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          branch: develop
          base: main
          title: "ðŸš€ Release: develop â†’ main (Automated)"
          body: |
            ## Production Release
            
            **Source PR**: #${{ github.event.pull_request.number }}
            **Merged at**: ${{ github.event.pull_request.merged_at }}
            
            This release includes all features approved in develop.
            
            ### âœ… Validation
            - All tests passed
            - Code review completed
            - Build successful
            
            ---
            *Automatically generated after merge to develop*
          labels: release,production,automated